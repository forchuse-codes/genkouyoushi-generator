<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="src/css/styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf-lib/1.17.1/pdf-lib.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js" defer></script>
    <script type="module" src="src/js/main.js" defer></script>
    <title>Genkouyoushi Generator</title>
</head>
<body>
    <header>
        <picture>
          <source srcset="img/logo-white.png" media="(prefers-color-scheme: dark)">
          <img src="img/logo-black.png" alt="" aria-hidden=true>
        </picture>
        <h1>Genkouyoushi Generator</h1>
        <div class="byline">
            <p>By Forchuse</p>
            <a href="https://github.com/forchuse-codes/genkouyoushi-generator/tree/main" aria-label="View code on GitHub (opens in new tab)" title="View code on GitHub" target="_blank">
                <svg xmlns="http://www.w3.org/2000/svg" style="width: 1.25rem;" viewBox="0 0 496 512"><!--!Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3 .3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5 .3-6.2 2.3zm44.2-1.7c-2.9 .7-4.9 2.6-4.6 4.9 .3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3 .7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3 .3 2.9 2.3 3.9 1.6 1 3.6 .7 4.3-.7 .7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3 .7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3 .7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
            </a>
        </div>
    </header>
    <main>
    
        <section class="introduction">
            <h2>How To Use</h2>
            <div>
                <p>
                    The grid will automatically fill with as many cells as possible
                    within the page size and margins you specify in Page Layout.
                </p>
                <ul>
                    <li>
                        <strong>Units</strong>
                        <p>choose between inches and millimeters</p>
                    </li>
                    <li>
                        <strong>Page Layout</strong> 
                        <p>adjust to match the desired size/margins of the final printed page</p>
                    </li>
                    <li>
                        <strong>Grid Design</strong> 
                        <p>cell size, grid gaps/style/colors, grid line style</p>
                    </li>
                    <li>
                        <strong>PDF Options</strong> 
                        <p>quality and filename of the saved PDF</p>
                    </li>
                </ul>
            </div>
            <div>
                <p>
                    Some options, such as page size presets, orientation, and grid styles/colors, will automatically refresh the preview 
                    upon selection or change.
                </p>
                <p>
                    Click the <strong>Refresh Preview</strong> button to see what the grid will look like provided the changes you made, 
                    and <strong>Download as PDF</strong> when you're satisfied with the results! 
                    Downloading will automatically refresh the preview to ensure it downloads with the most up to date configuration.
                </p>
                <p class="alert">
                    <strong>Note:</strong> due to the decimal value nature of conversion between inches and millimeters, minor differences
                    in cell size, row/column counts, etc due to rounding are unavoidable when swapping between unit types.
                </p>
            </div>
            
        </section>

        <div class="main">  
            <section id="configuration" class="configuration units-in" data-units="in">
                <div class="section-header_wrapper">
                    <h2>Configuration</h2>
                    <div class="unit-button-wrapper">
                        <span>Units:</span>
                        <div id="units" class="btn-group">
                            <button class="selected" data-abbrv="in" title="Switch units to inches" aria-label="Switch units to inches">in</button>
                            <button data-abbrv="mm" title="Switch units to millimeters" aria-label="Switch units to millimeters">mm</button>
                        </div>
                    </div>
                </div>
        
                <div class="config__page-layout config-section">
                    <div class="section-title">
                        <div>
                            <h3>Page Layout</h3>
                            <button class="section-help" aria-controls="help__page-layout" aria-expanded="false" title="Page Layout Help">
                            </button>
                        </div>
                    </div>
                    <div class="config-section_wrapper">
                        <fieldset class="config__page-layout__dimensions config-section_sub">
                            <legend class="section-header">Dimensions</legend>
                            <label for="page-width">
                            Width:
                            </label>
                            <div>
                                <input 
                                    type="number" 
                                    id="page-width" 
                                    class="unit-value dimension"
                                    data-axis="x"
                                    min=0
                                    value=8.5
                                    step=0.05>
                                <span class="suffix mm">mm</span>
                                <span class="suffix in">in</span>
                            </div>
                            <label for="page-height">
                            Height:
                            </label>
                            <div>
                                <input 
                                    type="number" 
                                    id="page-height" 
                                    class="unit-value dimension"
                                    data-axis="y"
                                    min=0
                                    value=11
                                    step=0.05>
                                <span class="suffix mm">mm</span>
                                <span class="suffix in">in</span>
                            </div>
                            <label for="page-presets">Presets:</label>
                            <select name="presets" id="presets">
                                <option id="a4" value="A4" data-in-x="8.3" data-in-y="11.7" data-mm-x="210" data-mm-y="297">
                                    A4
                                </option>

                                <option id="a5" value="A5" data-in-x="5.8" data-in-y="8.3" data-mm-x="148" data-mm-y="210">
                                    A5
                                </option>

                                <option id="a6" value="A6" data-in-x="4.1" data-in-y="5.8" data-mm-x="105" data-mm-y="148">
                                    A6
                                </option>

                                <option id="a7" value="A7" data-in-x="2.9" data-in-y="4.1" data-mm-x="74" data-mm-y="105">
                                    A7
                                </option>

                                <option id="b5" value="B5" data-in-x="6.9" data-in-y="9.8" data-mm-x="176" data-mm-y="250">
                                    B5
                                </option>

                                <option id="half-letter" value="Half-letter" data-in-x="5.5" data-in-y="8.5" data-mm-x="140" data-mm-y="216">
                                    Half-letter
                                </option>

                                <option id="index-card-lg" class="custom" value="Index Card - L" data-in-x="5" data-in-y="8" data-mm-x="127" data-mm-y="203.2">
                                    Index Card
                                </option>

                                <option id="index-card-md" class="custom" value="Index Card - M" data-in-x="4" data-in-y="6" data-mm-x="101.6" data-mm-y="152.4">
                                    Index Card
                                </option>

                                <option id="index-card" class="custom" value="Index Card - S" data-in-x="3" data-in-y="5" data-mm-x="76.2" data-mm-y="127">
                                    Index Card
                                </option>
                                
                                <option id="legal" value="Legal" data-in-x="8.5" data-in-y="14" data-mm-x="216" data-mm-y="356">
                                    Legal
                                </option>

                                <option id="letter" value="Letter" data-in-x="8.5" data-in-y="11" data-mm-x="216" data-mm-y="279" selected>
                                    Letter
                                </option>

                                <option id="custom" class="custom" value="Custom">
                                    Custom
                                </option>
                            </select>
                            <label for="orientation">Orientation:</label>
                            <ul>
                                <li>
                                    <input type="radio" name="orientation" id="portrait" checked>
                                    <label for="portrait">Portrait</label>
                                </li> 
                                <li>
                                    <input type="radio" name="orientation" id="landscape">
                                    <label for="Landscape">Landscape</label>
                                </li> 
                            </ul>
                        </fieldset>
                
                        <fieldset class="config__page-layout__margins config-section_sub">
                            <legend class="section-header">Margins</legend>
                            <label for="margin-x">Left/Right:</label>
                            <div>
                                <input 
                                    type="number"
                                    id="margin-x"
                                    class="unit-value"
                                    step=0.05
                                    min=0
                                    value=0.25>
                                <span class="suffix mm">mm</span>
                                <span class="suffix in">in</span>
                            </div>
                            <label for="margin-y">Top/Bottom:</label>
                            <div>
                                <input 
                                    type="number"
                                    id="margin-y"
                                    class="unit-value"
                                    step=0.05
                                    min=0
                                    value=0.5>
                                <span class="suffix mm">mm</span>
                                <span class="suffix in">in</span>
                            </div>
                        </fieldset>
                    </div>

                    <dialog id="help__page-layout" class="help-modal">
                        <div class="help-modal__content">
                            <div class="help-modal__header">
                                <h4>Page Layout Help</h4>
                                <button class="close-help" title="Close help window">X</button>
                            </div>
                            <div class="help-modal__body no-details">
                                <div>
                                    <strong>Dimensions:</strong>
                                    <p>The width and height of the printed page in inches</p>
                                </div>
                                <div>
                                    <strong>Presets:</strong>
                                    <p>A selection of preset standardized paper sizes, both US and International (preview refreshes on selection)</p>
                                </div>
                                <div>
                                    <strong>Orientation:</strong>
                                    <p>Choose between Landscape and Portrait (preview refreshes on selection)</p>
                                </div>
                                <div>
                                    <strong>Margins:</strong>
                                    <p>Page margins (in inches) for sides and top/bottom</p>
                                </div>
                            </div>
                        </div>
                    </dialog>
                </div>
        
                <div class="config__grid config-section">
                    <div class="section-title">
                        <div>
                            <h3>Grid Design</h3>
                            <button class="section-help" aria-controls="help__grid-design" aria-expanded="false" title="Grid Design Help">
                            </button>
                        </div>
                    </div>
                    <div class="config-section_wrapper">                    
                        <fieldset class="config__row config-section_sub">
                            <legend class="section-header">Sizes</legend>
                            <label for="cell-size">Cell Size:</label>
                            <div>
                                <!-- <input type="number" id="cell-size" class="unit-value" min=1 value=14 step=1> -->
                                <input type="number" id="cell-size" class="unit-value" min=0 value=0.5 step=0.05>
                                <span class="suffix mm">mm</span>
                                <span class="suffix in">in</span>
                            </div>
                            <label for="col-gap">Column Gap:</label>
                            <div>
                                <input type="number" id="col-gap" min=0 value=20>
                                <span class="suffix">px</span>
                            </div>
                            <label for="row-gap">Row Gap:</label>
                            <div>
                                <input type="number" id="row-gap" min=0 value=0>
                                <span class="suffix">px</span>
                            </div>
                        </fieldset>
                
                        <fieldset class="config__row__colors config-section_sub">
                            <legend class="section-header">Colors</legend>
                            <label for="color-main">Border:</label>
                            <input type="color" id="color-main" value="#333333">
                            <label for="color-sub">Subgrid:</label>
                            <input type="color" id="color-sub" value="#dcdcdc">
                            <label for="color-subber">Subbergrid:</label>
                            <input type="color" id="color-subber" value="#f5f5f5">
                        </fieldset>

                        <div class="fieldset">
                            <div class="section-header">
                                <h4>Line Types</h4>
                            </div>
                            <div class="config-section_wrapper">
                                <fieldset id="line-type_sub" class="config__row__line-type config-section_sub">
                                    <legend class="section-header">Subgrid</legend>
                                    <ul>
                                        <li>
                                            <input type="radio" id="sub_line-solid" name="sub_line-type" value="solid">
                                            <label for="sub_line-solid">Solid</label>
                                        </li>
                                        <li>
                                            <input type="radio" id="sub_line-dashed" name="sub_line-type" value="dashed" checked>
                                            <label for="sub_line-dashed">Dashed</label> 
                                        </li>
                                        <li>
                                            <input type="radio" id="sub_line-dotted" name="sub_line-type" value="dotted">
                                            <label for="sub_line-dotted">Dotted</label>
                                        </li>
                                    </ul>
                                </fieldset>
                                <fieldset id="line-type_subber" class="config__row__line-type config-section_sub">
                                    <legend class="section-header">Subbergrid</legend>
                                    <ul>
                                        <li>
                                            <input type="radio" id="subber_line-solid" name="subber_line-type" value="solid">
                                            <label for="subber_line-solid">Solid</label>
                                        </li>
                                        <li>
                                            <input type="radio" id="subber_line-dashed" name="subber_line-type" value="dashed" checked>
                                            <label for="subber_line-dashed">Dashed</label> 
                                        </li>
                                        <li>
                                            <input type="radio" id="subber_line-dotted" name="subber_line-type" value="dotted">
                                            <label for="subber_line-dotted">Dotted</label>
                                        </li>
                                    </ul>
                                </fieldset>
                            </div>
                        </div>

                        <fieldset class="config__grid__style config-section_sub">
                            <legend class="section-header">Style</legend>
                            <ul class="grid-style">
                                <li>
                                    <input id="none" type="radio" name="grid-style" value="blank">
                                    <div class="grid none">
                                        <label for="none" title="No Squares">
                                        </label>
                                    </div>
                                </li>
                                <li>
                                    <input id="quad"type="radio" name="grid-style" value="quad" checked>
                                    <div class="grid quad">
                                        <label for="quad" title="Four Squares">
                                        <div class="quad-lines"></div>
                                        </label>
                                    </div>
                                </li>
                                <li>
                                    <input id="hexa" type="radio" name="grid-style" value="hexa">
                                    <div class="grid hexa">
                                        <label for="hexa" title="Eight Squares">
                                        <div class="quad-lines"></div>
                                        <div class="hexa-lines"></div>
                                        </label>
                                    </div>
                                </li>
                            </ul>
                        </fieldset>
                        
                        <div class="fieldset fieldset__100">
                            <div class="section-header"><h4>Vocab Mode</h4></div>
                            <fieldset id="vocab-section" class="config__grid__vocab config-section_sub empty">
                                <div class="vocab-header">
                                    <button id="add-word">Add Word</button>                                     
                                    <div class="word-gap">
                                        <input id="word-gap" type="number" min="1" value="20">
                                        <label for="word-gap">Word Gap</label>
                                    </div>
                                </div>
                                <div class="vocab-list__wrapper">
                                    <legend class="section-header">Characters</legend>
                                    <div id="vocab-list">
                                    </div>
                                    <!-- <div class="vocab-size__warning">
                                        <p>You have too many words and/or characters; they won't all fit!</p>
                                    </div> -->
                                </div>
                                
                            </fieldset>
                        </div>
                    </div>

                    <dialog id="help__grid-design" class="help-modal">
                        <div class="help-modal__content">
                            <div class="help-modal__header">
                                <h4>Grid Design Help</h4>
                                <button class="close-help" title="Close help window">X</button>
                            </div>
                            
                            <div class="help-modal__body">
                                <details name="grid-design" open>
                                    <summary>General</summary>
                                    <ul>
                                        <li>
                                            <strong>Cell:</strong>
                                            <p>Individual square cell for one character</p>
                                        </li>
                                        <li>
                                            <strong>Subgrid:</strong>
                                            <p>Initial subdivision of the main cell into four squares</p>
                                        </li>
                                        <li>
                                            <strong>Subbergrid:</strong>
                                            <p>Second subdivision of each of the subgrid's squares into four squares</p>
                                        </li>
                                    </ul>
                                </details>
                                <details name="grid-design">
                                    <summary>Sizes</summary>
                                    <ul>
                                        <li>
                                            <strong>Cell Size:</strong>
                                            <p>The width/height of each square within the grid in mm (this is approximate and is rounded down when converted to pixels)</p>
                                        </li>
                                        <li>
                                            <strong>Column Gap:</strong>
                                            <p>Page margins (in inches) for sides and top/bottom</p>
                                        </li>
                                    </ul>
                                </details>
                                <details name="grid-design">
                                    <summary>Colors</summary>
                                    <ul>
                                        <li>
                                            <strong>Border:</strong>
                                            <p>Color of the square cell's outside border</p>
                                        </li>
                                        <li>
                                            <strong>Subgrid:</strong>
                                            <p>Color of the two primary horizontal/vertical grid lines that bisect the cell's X and Y axis</p>
                                        </li>
                                        <li>
                                            <strong>Subbergrid:</strong>
                                            <p>Color of the four additional lines (two horizontal, two vertical) which bisect each of the subgrid's squares</p>
                                        </li>
                                    </ul>
                                </details>
                                <details name="grid-design">
                                    <summary>Line Types</summary>
                                    <p>Style of the line (solid, dashed, or dotted) for the Subgrid and Subbergrid lines</p>
                                </details>
                                <details name="grid-design">
                                    <summary>Style</summary>
                                    <div>
                                        <p>Number of guidelines within each square: none, two (four subsquares), or six (sixteen subsquares)</p>
                                    </div>
                                </details>
                            </div>
                        </div>
                    </dialog>
                </div>
        
                <div class="config__print config-section">
                    <div class="section-title">
                        <div>
                            <h3>PDF Options</h3>
                            <button class="section-help" aria-controls="help__pdf-options" aria-expanded="false" title="PDF Options Help">
                            </button>
                        </div>
                    </div>
                    <div class="config-section_wrapper">
                        <div class="config__row config-section_sub">
                            <h4 class="section-header">Quality</h4>
                            <label for="scale">Scale:</label>
                            <input type="number" id="scale" min="1" max="10" value="4">
                            <label for="dpi">DPI*:</label>
                            <input type="number" id="dpi" min="72" value="72">
                            <span class="section-header">* see PDF Options Help for more information</span>
                        </div>
                
                        <div class="config-section_sub">
                            <fieldset>
                                <legend class="section-header">Filename</legend>
                                <ul>
                                    <li>
                                        <input type="checkbox" name="filename" id="dimensions" data-target="#presets" checked>
                                        <label for="dimensions">Page Size</label>
                                    </li>
                                    <li>
                                        <input type="checkbox" name="filename" id="size" data-target="#cell-size" checked>
                                        <label for="size">Cell Size</label>
                                    </li>
                                    <li>
                                        <input type="checkbox" id="gap" name="filename" data-target="#col-gap">
                                        <label for="gap">Gap</label>
                                    </li>
                                    <li>
                                        <input type="checkbox" id="style" name="filename" data-target="grid-style" checked>
                                        <label for="style">Style</label>
                                    </li>
                                </ul>
                            </fieldset>
                        </div>
                    </div>
                </div>

                <dialog id="help__pdf-options" class="help-modal">
                    <div class="help-modal__content">
                        <div class="help-modal__header">
                            <h4>PDF Options Help</h4>
                            <button class="close-help" title="Close help window">X</button>
                        </div>
                        
                        <div class="help-modal__body">
                            <details name="pdf-options" open>
                                <summary>Quality</summary>
                                <ul>
                                    <li>
                                        <strong>Scale:</strong>
                                        <p>Overall quality (from 1-10) of the saved PDF. The higher the Scale, the larger the resulting file size.</p>
                                    </li>
                                    <li>
                                        <strong>DPI:</strong>
                                        <p>
                                            Dots Per Inch; a printing version of screen resolution. The higher this number, the higher the quality (and file size). 
                                        </p>
                                        <p class="alert">
                                            <strong>Note:</strong> Increasing DPI will also affect the PDF's final dimensions as far as printing is concerned.
                                            For example, 8.5in would be 8.5in at 72 dpi and 35.42in at 300 dpi. It can still be scaled in the print setup process
                                            if printing to a different physical page than configured in Page Layout, but the cell size may wind up being 
                                            different than expected. When increasing the DPI, it's best to print it on the same size paper as set in Page Layout.
                                        </p>
                                    </li>
                                </ul>
                            </details>
                            <details name="pdf-options">
                                <summary>Filename</summary>
                                <ul>
                                    <li>
                                        <strong>Page Size:</strong>
                                        <p>Adds the page size (preset name or width x height if custom) to the filename</p>
                                    </li>
                                    <li>
                                        <strong>Cell Size:</strong>
                                        <p>Adds the cell size in mm to the filename</p>
                                    </li>
                                    <li>
                                        <strong>Column Gap:</strong>
                                        <p>Adds the column gap in px to the filename</p>
                                    </li>
                                    <li>
                                        <strong>Style:</strong>
                                        <p>Adds the cell style (blank, quad, or hexa) to the filename</p>
                                    </li>
                                </ul>
                            </details>
                        </div>
                    </div>
                </dialog>
            </section>
        
            <section class="buttons">  
                <button id="refreshPreview" class="onclick">Refresh Preview</button>
                <button id="generatePDF" class="onclick">Download as PDF</button>
                <span id="pdf-name"></span>
            </section>
        </div>
        
        <div class="aside">
            <section class="preview">
                <h2>Preview</h2>
                <div class="preview-wrapper">
                <div id="page" class="page">
                    <div id="preview" class="grid genkouyoushi-grid" data-style="quad"></div>
                </div>
                </div>
            </section>
        </div>
    </main>
</body>
</html>